# ๐ ุณููุงุฑูู ุงุณุชุฎุฏุงู ุงูุจุตูุฉ ูู ุงููุดุฑูุน

## ๐ ูุธุฑุฉ ุนุงูุฉ
ุงููุดุฑูุน ูุณุชุฎุฏู ุงูุจุตูุฉ ูุชูููุฑ ุชุฌุฑุจุฉ ุฏุฎูู ุณุฑูุนุฉ ูุขููุฉ ูููุณุชุฎุฏููู ุฏูู ุงูุญุงุฌุฉ ูุฅุฏุฎุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ ูุฏููุงู ูู ูู ูุฑุฉ.

---

## ๐ฏ ุงูุณููุงุฑูููุงุช ุงูุฑุฆูุณูุฉ

### 1๏ธโฃ **ุงูุณููุงุฑูู ุงูุฃูู: ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ (ุฃูู ูุฑุฉ)**

```
ุงููุณุชุฎุฏู ููุชุญ ุงูุชุทุจูู ูุฃูู ูุฑุฉ
         โ
ุตูุญุฉ ุงูุฏุฎูู (Login Screen)
         โ
[ูุญุต ุงูุจุตูุฉ ูู ุงูุฎูููุฉ]
   โ ุงูุจุตูุฉ ูุชุงุญุฉ โ ูุธูุฑ ุฒุฑ ุงูุจุตูุฉ ๐ต
   โ ุงูุจุตูุฉ ุบูุฑ ูุชุงุญุฉ โ ูุง ูุธูุฑ ุฒุฑ ุงูุจุตูุฉ
         โ
ุงููุณุชุฎุฏู ููุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ
         โ
ูุถุบุท ุนูู ุฒุฑ "Log in"
         โ
[ุญูุธ ุงูุจูุงูุงุช ูู ุงูุชุฎุฒูู ุงูุขูู]
  โข ุงูุจุฑูุฏ ุงูุฅููุชุฑููู โ FlutterSecureStorage
  โข ูููุฉ ุงููุฑูุฑ โ FlutterSecureStorage (ูุดูุฑุฉ)
  โข ุญุงูุฉ ุงูุฌูุณุฉ โ is_logged_in = true
         โ
ุงูุงูุชูุงู ุฅูู WebView
  โข shouldAutoFill = false (ุชุณุฌูู ุฏุฎูู ุนุงุฏู)
  โข ุงููุณุชุฎุฏู ูููู ุงูุฏุฎูู ุนูู ุงููููุน
         โ
โ ุงููุณุชุฎุฏู ุงูุขู ูุณุฌู ูููููู ุงุณุชุฎุฏุงู ุงูุจุตูุฉ ูุงุญูุงู
```

---

### 2๏ธโฃ **ุงูุณููุงุฑูู ุงูุซุงูู: ุงููุณุชุฎุฏู ุงููุณุฌู (ุฏุฎูู ุจุงูุจุตูุฉ)**

```
ุงููุณุชุฎุฏู ููุชุญ ุงูุชุทุจูู (ูุฑุฉ ุซุงููุฉ)
         โ
ุตูุญุฉ ุงูุฏุฎูู (Login Screen)
         โ
[ุงูุชููุฆุฉ ุงูุฃูููุฉ - _initialSetup()]
  1. ูุญุต ุชููุฑ ุงูุจุตูุฉ โ โ ูุชุงุญุฉ
  2. ุชุญููู ุงูุจูุงูุงุช ุงููุญููุธุฉ โ โ ููุฌูุฏุฉ
  3. ูุญุต ุญุงูุฉ ุงูุฌูุณุฉ โ โ ูุณุฌู (is_logged_in = true)
         โ
[ุชุดุบูู ุงูุจุตูุฉ ุชููุงุฆูุงู ๐ค]
         โ
ุชุธูุฑ ุดุงุดุฉ ุงูุจุตูุฉ ูู ุงููุธุงู
  "ูุฑุฌู ุงุณุชุฎุฏุงู ุงูุจุตูุฉ ุงููุญููุธุฉ ูู ุฌูุงุฒู ููุชุญูู ูู ูููุชู"
         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ูุฌุญ ุงูุชุญูู โ   โ  ูุดู ุงูุชุญูู โ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ                    โ
         โ                    โ
  [ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช]    [ุฑุณุงูุฉ ุชูุจูู]
   โข ุงูุจุฑูุฏ           "ูุดู ุงูุชุญูู ูู ุงูุจุตูุฉ"
   โข ูููุฉ ุงููุฑูุฑ       "ุงูุจูุงูุงุช ููููุกุฉ ุชููุงุฆูุงู"
         โ              "ููููู ุงุณุชุฎุฏุงู ุฒุฑ Log in"
  [ููุก ุงูุญููู]              โ
   โข _emailController        โ
   โข _passwordController     โ
         โ                    โ
  ุงูุงูุชูุงู ุฅูู WebView โ โ โ โ
   โข shouldAutoFill = true
   โข ูุชู ููุก ููุฑู ุงููููุน ุชููุงุฆูุงู
         โ
  [JavaScript Injection]
   โข ุงูุจุญุซ ุนู ุญููู ุงูุฏุฎูู
   โข ููุก ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
   โข ููุก ูููุฉ ุงููุฑูุฑ
   โข (ุงุฎุชูุงุฑู) ุงูุถุบุท ุนูู ุฒุฑ ุงูุฏุฎูู
         โ
โ ุงูุฏุฎูู ุงูุชููุงุฆู ุงููุงูู
```

---

### 3๏ธโฃ **ุงูุณููุงุฑูู ุงูุซุงูุซ: ุงุณุชุฎุฏุงู ุฒุฑ ุงูุจุตูุฉ ูุฏููุงู**

```
ุงููุณุชุฎุฏู ูู ุตูุญุฉ ุงูุฏุฎูู
         โ
ุงูุญููู ูุงุฑุบุฉ ุฃู ููููุกุฉ
         โ
ูุถุบุท ุนูู ุฒุฑ ุงูุจุตูุฉ ๐ต (ุงูุฏุงุฆุฑุฉ ุงูุฒุฑูุงุก)
         โ
[ุงูุชุญูู ูู ุงูุดุฑูุท]
  1. ูู ููุงู ุฌูุณุฉ ุณุงุจูุฉุ
     โ ูุง โ ุฑุณุงูุฉ "ูุง ุชูุฌุฏ ุจูุงูุงุช ูุญููุธุฉ"
     โ ูุนู โ ูุชุงุจุนุฉ
         โ
  2. ูู ุงูุจุตูุฉ ูุชุงุญุฉุ
     โ ูุง โ ุฑุณุงูุฉ "ุงูุจุตูุฉ ุบูุฑ ูุชุงุญุฉ"
     โ ูุนู โ ูุชุงุจุนุฉ
         โ
ุชุธูุฑ ุดุงุดุฉ ุงูุจุตูุฉ
         โ
[ุจุนุฏ ุงูุชุญูู ุงููุงุฌุญ]
  โข ููุก ุญููู ุงูุจุฑูุฏ ููููุฉ ุงููุฑูุฑ
  โข ุงูุงูุชูุงู ุฅูู WebView ูุน ุชุนุจุฆุฉ ุชููุงุฆูุฉ
         โ
โ ุฏุฎูู ุณุฑูุน ุนุจุฑ ุงูุจุตูุฉ
```

---

## ๐ง ุงูููููุงุช ุงูุชูููุฉ

### **1. BiometricService** (ุฎุฏูุฉ ุงูุจุตูุฉ)

```dart
// ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ:

โ isAvailable()
  โ ูุญุต ุดุงูู ูุชููุฑ ุงูุจุตูุฉ
  โ ูุชุญูู ูู: ุฏุนู ุงูุฌูุงุฒ + ุชูุนูู ุงูุจุตูุฉ + ูุฌูุฏ ุจุตูุฉ ูุณุฌูุฉ

โ authenticate()
  โ ุนุฑุถ ุดุงุดุฉ ุงูุจุตูุฉ ูููุณุชุฎุฏู
  โ ุฎูุงุฑุงุช ุงูุฃูุงู:
    โข biometricOnly: true (ููุท ุจุตูุฉ ุญููููุฉ)
    โข stickyAuth: true (ุงุณุชูุฑุงุฑ ุงููุญุงููุฉ)
    โข useErrorDialogs: true (ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ)

โ checkBiometricStatus()
  โ ูุญุต ุชูุตููู ูุญุงูุฉ ุงูุจุตูุฉ (ููุงุฎุชุจุงุฑ)

โ getAvailableBiometrics()
  โ ูุนุฑูุฉ ุฃููุงุน ุงูุจุตูุฉ ุงููุชุงุญุฉ
  โ fingerprint, face, iris, strong, weak
```

### **2. SessionManager** (ุฅุฏุงุฑุฉ ุงูุฌูุณุฉ)

```dart
// ุงูุชุฎุฒูู ุงูุขูู:

โ saveLoginInfo(username, password)
  โ ุญูุธ ุจูุงูุงุช ุงูุฏุฎูู ุจุดูู ูุดูุฑ
  โ Android: AES-GCM encryption
  โ iOS: Keychain secure storage

โ getUsername() / getPassword()
  โ ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช ุงููุญููุธุฉ

โ isLoggedIn()
  โ ุงูุชุญูู ูู ูุฌูุฏ ุฌูุณุฉ ูุดุทุฉ

โ logout()
  โ ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงููุญููุธุฉ
```

### **3. LoginScreen** (ุดุงุดุฉ ุงูุฏุฎูู)

```dart
// ููุงุท ุงูุชุฏูู ุงูุฑุฆูุณูุฉ:

1๏ธโฃ initState()
   โ _initialSetup()

2๏ธโฃ _initialSetup()
   โ ูุญุต ุงูุจุตูุฉ
   โ ุชุญููู ุงูุจูุงูุงุช
   โ ุฏุฎูู ุชููุงุฆู (ุฅุฐุง ูุชููุฑ)

3๏ธโฃ _handleLogin()
   โ ุชุณุฌูู ุฏุฎูู ุนุงุฏู
   โ ุญูุธ ุงูุจูุงูุงุช
   โ ุงูุงูุชูุงู ุฅูู WebView (shouldAutoFill = false)

4๏ธโฃ _handleBiometricLogin()
   โ ุงูุชุญูู ูู ุงูุจุตูุฉ
   โ ููุก ุงูุญููู
   โ ุงูุงูุชูุงู ุฅูู WebView (shouldAutoFill = true)
```

### **4. WebViewScreen** (ุดุงุดุฉ ุงููุชุตูุญ)

```dart
// ูุนุงูู ููู:
final bool shouldAutoFill;

๐ shouldAutoFill = false
   โ ุฏุฎูู ุนุงุฏูุ ุงููุณุชุฎุฏู ูููุฃ ุงูููุฑู ุจููุณู

๐ shouldAutoFill = true
   โ ุชุนุจุฆุฉ ุชููุงุฆูุฉ ุนุจุฑ JavaScript
   โ ูุชู ุญูู ููุฏ JS ูููุก ุญููู ุงูุฏุฎูู
```

---

## ๐ ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

### โ **ูุง ูุชู ุชุฎุฒููู:**
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุดูุฑ)
- ูููุฉ ุงููุฑูุฑ (ูุดูุฑ)
- ุญุงูุฉ ุงูุฌูุณุฉ (boolean)

### โ **ููู ูุชู ุงูุชุดููุฑ:**
- **Android**: `AES-GCM-NoPadding` + `EncryptedSharedPreferences`
- **iOS**: `Keychain` ูุน `first_unlock_this_device`

### โ **ุงูุจุตูุฉ:**
- ูุง ูุชู ุชุฎุฒูู ุงูุจุตูุฉ ููุณูุง
- ุงูุจุตูุฉ ุชุณุชุฎุฏู ููุท ููุชุญูู ูู ุงููููุฉ
- ุจุนุฏ ุงูุชุญูู ุงููุงุฌุญ โ ูุชู ุงููุตูู ููุจูุงูุงุช ุงููุดูุฑุฉ

### โ๏ธ **ููุงุฐุง ูุญูุธ ูููุฉ ุงููุฑูุฑุ**
ูุฃู ุงูุชุทุจูู ูุญุชุงุฌ ูููุก ููุฑู ูููุน ุฎุงุฑุฌู (WebView)ุ ูุฐูู ูุฌุจ ุญูุธ ูููุฉ ุงููุฑูุฑ ูุฅููุงู ุนูููุฉ ุงูุฏุฎูู ุงูุชููุงุฆู.

**ุจุฏุงุฆู ุฃูุซุฑ ุฃูุงูุงู:**
1. ุงุณุชุฎุฏุงู OAuth/SSO ุจุฏูุงู ูู ูููุฉ ุงููุฑูุฑ
2. ุงุณุชุฎุฏุงู Session Tokens ุจุฏูุงู ูู ุงูุจุงุณูุฑุฏ
3. ุงุณุชุฎุฏุงู Backend API ูููุตุงุฏูุฉ

---

## ๐ ูุฎุทุท ุชุฏูู ุงูุจูุงูุงุช

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   ุงููุณุชุฎุฏู                          โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              Login Screen (UI Layer)                โ
โ  โข ุญููู ุงูุฅุฏุฎุงู                                     โ
โ  โข ุฒุฑ Log in                                        โ
โ  โข ุฒุฑ ุงูุจุตูุฉ ๐ต                                     โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
      โโโโโโโโดโโโโโโโ
      โ             โ
      โ             โ
โโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ
โ Biometricโ  โ   Session    โ
โ Service  โ  โ   Manager    โ
โโโโโโโฌโโโโโ  โโโโโโโโฌโโโโโโโโ
      โ              โ
      โ              โ
      โ    โโโโโโโโโโโโโโโโโโโ
      โ    โ FlutterSecure   โ
      โ    โ    Storage      โ
      โ    โ  (ูุดูุฑ ๐)      โ
      โ    โโโโโโโโโโโโโโโโโโโ
      โ
      โ
โโโโโโโโโโโโโโโโ
โ   System     โ
โ  Biometric   โ
โ   (OS)       โ
โโโโโโโโโโโโโโโโ
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงูุณููุงุฑูููุงุช

### **ุงุฎุชุจุงุฑ 1: ุฃูู ุฏุฎูู**
```bash
1. ุงูุณุญ ุจูุงูุงุช ุงูุชุทุจูู
2. ุงูุชุญ ุงูุชุทุจูู
3. ุชุฃูุฏ ูู ุนุฏู ุธููุฑ ุดุงุดุฉ ุงูุจุตูุฉ ุชููุงุฆูุงู
4. ุฃุฏุฎู ุจุฑูุฏ ุฅููุชุฑููู ููููุฉ ูุฑูุฑ
5. ุงุถุบุท "Log in"
6. ุชุฃูุฏ ูู ุญูุธ ุงูุจูุงูุงุช
```

### **ุงุฎุชุจุงุฑ 2: ุฏุฎูู ุชููุงุฆู ุจุงูุจุตูุฉ**
```bash
1. ุจุนุฏ ุงูุงุฎุชุจุงุฑ 1ุ ุฃุบูู ุงูุชุทุจูู
2. ุงูุชุญู ูุฑุฉ ุฃุฎุฑู
3. ูุฌุจ ุฃู ุชุธูุฑ ุดุงุดุฉ ุงูุจุตูุฉ ุชููุงุฆูุงู
4. ุถุน ุจุตูุชู
5. ูุฌุจ ุงูุฏุฎูู ูุจุงุดุฑุฉ ุฅูู WebView
```

### **ุงุฎุชุจุงุฑ 3: ูุดู ุงูุจุตูุฉ**
```bash
1. ุงูุชุญ ุงูุชุทุจูู (ูุน ุฌูุณุฉ ุณุงุจูุฉ)
2. ุนูุฏูุง ุชุธูุฑ ุดุงุดุฉ ุงูุจุตูุฉ
3. ุงุถุบุท "Cancel" ุฃู ุงุณุชุฎุฏู ุจุตูุฉ ุฎุงุทุฆุฉ
4. ูุฌุจ ููุก ุงูุญููู ุชููุงุฆูุงู
5. ููููู ุงูุถุบุท ุนูู "Log in" ููุฏุฎูู
```

### **ุงุฎุชุจุงุฑ 4: ุงุณุชุฎุฏุงู ุฒุฑ ุงูุจุตูุฉ ูุฏููุงู**
```bash
1. ุงูุชุญ ุงูุชุทุจูู
2. ุงุถุบุท ุนูู ุฒุฑ ุงูุจุตูุฉ ๐ต ุงูุฃุฒุฑู
3. ุถุน ุจุตูุชู
4. ูุฌุจ ุงูุฏุฎูู ูุจุงุดุฑุฉ
```

---

## ๐ ุญุงูุงุช ุงูุฎุทุฃ ูุงูุชุนุงูู ูุนูุง

### **ุฎุทุฃ: ุงูุจุตูุฉ ุบูุฑ ูุชุงุญุฉ**
```
ุงูุณุจุจ: ุงูุจุตูุฉ ุบูุฑ ููุนูุฉ ูู ุฅุนุฏุงุฏุงุช ุงูุฌูุงุฒ
ุงูุญู: ุฑุณุงูุฉ ุชูุถุญ ูููุณุชุฎุฏู ุชูุนูู ุงูุจุตูุฉ
ุงููุชูุฌุฉ: ูููู ุงูุฏุฎูู ุนุจุฑ ุฒุฑ "Log in" ุงูุนุงุฏู
```

### **ุฎุทุฃ: ูุง ุชูุฌุฏ ุจูุงูุงุช ูุญููุธุฉ**
```
ุงูุณุจุจ: ุงููุณุชุฎุฏู ูู ูุณุฌู ุฏุฎูู ูู ูุจู
ุงูุญู: ุฑุณุงูุฉ "ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู"
ุงููุชูุฌุฉ: ูุฌุจ ุงุณุชุฎุฏุงู ุฒุฑ "Log in" ุฃููุงู
```

### **ุฎุทุฃ: ูุดู ุญูุธ ุงูุจูุงูุงุช**
```
ุงูุณุจุจ: ูุดููุฉ ูู FlutterSecureStorage
ุงูุญู: ุฅุนุงุฏุฉ ุงููุญุงููุฉ + ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ
ุงููุชูุฌุฉ: ุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู
```

### **ุฎุทุฃ: ูุดู ุงูุชุญูู ูู ุงูุจุตูุฉ**
```
ุงูุณุจุจ: ุจุตูุฉ ุฎุงุทุฆุฉ ุฃู ุฅูุบุงุก ุงููุณุชุฎุฏู
ุงูุญู: ููุก ุงูุญููู + ุฑุณุงูุฉ ุฅุฑุดุงุฏูุฉ
ุงููุชูุฌุฉ: ูููู ุงุณุชุฎุฏุงู ุฒุฑ "Log in"
```

---

## ๐ก ูุตุงุฆุญ ููุชุทููุฑ ุงููุณุชูุจูู

### **1. ุชุญุณูู ุงูุฃูุงู:**
- ุงุณุชุฎุฏุงู Session Tokens ุจุฏูุงู ูู ูููุฉ ุงููุฑูุฑ
- ุฅุถุงูุฉ ูููุฉ ุฒูููุฉ ููุฌูุณุฉ (Session Timeout)
- ุชุดููุฑ ุฅุถุงูู ููุจูุงูุงุช ุงูุญุณุงุณุฉ

### **2. ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:**
- ุฅุถุงูุฉ ุฎูุงุฑ "ุชุฐูุฑูู" ูุชุนุทูู ุงูุจุตูุฉ
- ุฅุถุงูุฉ ุฅุนุฏุงุฏุงุช ูุชุฎุตูุต ุณููู ุงูุจุตูุฉ
- ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ ุจุดูู ุฃูุซุฑ ูุถูุญุงู

### **3. ุงูุฃุฏุงุก:**
- Caching ูุญุงูุฉ ุงูุจุตูุฉ
- ุชูููู ุนุฏุฏ ุนูููุงุช ุงููุฑุงุกุฉ ูู Storage
- ุชุญุณูู ููุช ุชุญููู WebView

### **4. ุงูุงุฎุชุจุงุฑ:**
- Unit Tests ููุฎุฏูุงุช
- Integration Tests ููุณููุงุฑูููุงุช
- UI Tests ููุชุฃูุฏ ูู ุงูุชุฏูู ุงูุณููู

---

## ๐ ุงููุฑุงุฌุน

- `lib/services/biometric_service.dart` - ุฎุฏูุฉ ุงูุจุตูุฉ
- `lib/services/session_manager.dart` - ุฅุฏุงุฑุฉ ุงูุฌูุณุฉ
- `lib/screens/login_screen.dart` - ุดุงุดุฉ ุงูุฏุฎูู
- `lib/screens/webview_screen.dart` - ุดุงุดุฉ ุงููุชุตูุญ
- `lib/utils/biometric_checker.dart` - ุฃุฏุงุฉ ุงููุญุต

---

**ุขุฎุฑ ุชุญุฏูุซ:** ุฏูุณูุจุฑ 2025
